<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Truco PY — Partida</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="topbar">
    <div class="topbar-inner">
      <a class="brand" href="/index.html">Truco PY</a>
      <div class="user-chip">
        <img id="userPhoto" alt="" />
        <div>
          <div id="userName"></div>
          <a class="small" href="#" id="btnLogout">Salir</a>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="panel stack">
      <h1 class="h1">Partida</h1>
      <div class="kv">
        <div>gameId</div><div id="gameId" class="mono"></div>
      </div>

      <div id="turn" class="badge">(estado)</div>

      <div id="gameStatus" class="small"></div>

      <div id="winnerBanner" style="display:none;"></div>

      <div class="stack" style="gap:8px;">
        <div id="matchMeta" class="small"></div>

        <div class="result-grid">
          <div class="result-card">
            <div id="scoreMeName" class="small"></div>
            <div id="scoreMeMatch" class="result-big"></div>
          </div>
          <div class="result-card">
            <div id="scoreOtherName" class="small"></div>
            <div id="scoreOtherMatch" class="result-big"></div>
          </div>
        </div>

        <div id="handMeta" class="small"></div>

        <div class="result-grid">
          <div class="result-card">
            <div class="small">Bazas</div>
            <div id="scoreMeHand" class="result-big"></div>
          </div>
          <div class="result-card">
            <div class="small">Bazas</div>
            <div id="scoreOtherHand" class="result-big"></div>
          </div>
        </div>
      </div>

      <div id="historyList" class="stack" style="gap:6px;"></div>

      <hr />

      <div class="stack" style="gap:10px;">
        <div class="small">Cantos</div>
        <div id="callStatus" class="small"></div>
        <div class="row">
          <button id="btnEnvido" type="button">Envido</button>
          <button id="btnRealEnvido" type="button">Real Envido</button>
          <button id="btnFaltaEnvido" type="button">Falta Envido</button>
        </div>
        <div class="row">
          <button id="btnTruco" type="button">Truco</button>
          <button id="btnRetruco" type="button">Retruco</button>
          <button id="btnVale4" type="button">Vale 4</button>
        </div>
        <div class="row" id="callResponseRow" style="display:none;">
          <button id="btnQuiero" type="button" class="primary">Quiero</button>
          <button id="btnNoQuiero" type="button" class="danger">No quiero</button>
        </div>
      </div>

      <button id="btnNextHand" style="display:none;">Siguiente mano</button>

      <hr />

      <div class="stack">
        <div class="small" style="text-align:center;">Mesa</div>
        <div id="table" style="display:flex; justify-content:center; gap:10px; overflow:auto; padding: 6px 0;"></div>
        <div id="tableWinner" class="small" style="text-align:center;"></div>
      </div>

      <hr />

      <div class="stack">
        <div class="small" style="text-align:center;">Tu mano</div>
        <div id="hand" style="display:flex; gap:10px; overflow:auto; padding: 6px 0;"></div>
        <div id="handHint" class="small"></div>
      </div>

      <hr />

      <div class="stack">
        <div class="small">Privado: <span class="mono">games/{gameId}/private/{uid}</span></div>
        <pre id="privateState" class="mono" style="white-space:pre-wrap; margin:0;"></pre>
      </div>

      <hr />

      <div class="stack">
        <div class="small">Preview mazo (desde <span class="mono">/cards/cards.json</span>)</div>
        <div id="cardsPreviewStatus" class="small"></div>
        <div id="cardsPreview" style="display:flex; gap:10px; overflow:auto; padding: 6px 0;"></div>
      </div>

      <hr />

      <div class="small">Acciones y turnos reales se implementan en Paso 6 (server autoritativo).</div>
    </div>
  </div>

  <div class="overlay" id="overlay">
    <div class="overlay-card stack">
      <div class="h1" style="margin:0;">Esperando…</div>
      <div class="small" id="overlayText">Cargando estado de la partida.</div>
      <button id="btnCloseOverlay">Cerrar</button>
    </div>
  </div>

  <script src="/firebase-config.js"></script>
  <script type="module" src="/src/pages/game.js"></script>
</body>
</html>
